---
import type { APIContext } from 'astro';
import GeoMap from '../components/GeoMap.astro';
const { title, date, coords, cover } = Astro.props;
const hasCoords = coords && coords.lat && coords.lon;
---

<article class="post-layout">
  <header>
    <h1>{title}</h1>
    <time datetime={date.toISOString()}>{date.toLocaleDateString()}</time>
    {cover && <img src={cover} alt={title + ' cover'} class="post-cover" />}
  </header>
  <main>
    <slot />
  </main>
  {hasCoords && (
    <section class="post-geomap">
      <GeoMap coords={coords} />
    </section>
  )}
</article>

<style>
.post-layout { max-width: 700px; margin: 0 auto; padding: 2rem; }
.post-cover { width: 100%; max-height: 350px; object-fit: cover; margin-bottom: 1rem; }
.post-geomap { margin-top: 2rem; }
</style>
